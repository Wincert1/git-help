# Памятка по работе с Git
## **How we work with git**


### Оглавление
1. [Вступление](#вступление-для-чайников)
2. [База](#база)
3. [Если еще нет проекта](#Если-еще-нет-проекта)
4. [Основные команды](#Основные-команды)
5. [Краткое описание работы над любой задачей](#вкратце-опишу-процесс-разработки-над-новой-задачей-даже-мелкой)
6. [Подробное описание процесса](#теперь-подробно-весь-процесс)
7. [Рекоммендации](#рекомендации)


### Вступление (для чайников)
Открываем терминал и пишем `git -v`
Если git установлен мы увидим в ответ что-то вроде:
`git version 2.39.2 (Apple Git-143)`
Если нет, заходим сюда https://www.git-scm.com/downloads, качаем последнюю версию и устанавливаем.


### База
У нас 2 ветки:
- **master** - Рабочая версия бота с автодеплоем
- **dev** - Копия ветки master для разработки


### Если еще нет проекта
Переходим в папку с проектами и клонируем проект:

`git clone https://github.com/Wincert1/git-help.git git-help`

Где:<br> 
**https://github.com/Wincert1/git-help.git** - удаленный репозиторий с проектом,<br>
**git-help** - папка с проектом


### Основные команды
`git remote -v` - Список удаленных репозиториев.

`git branch` - Список локальных веток (текущая ветка отмечена звездочкой).

`git checkout dev` - Переключиться на ветку dev.

`git checkout -b new-issue` - Создает новую ветку (new-issue) из текущей и переключается на нее.

`git status` - Показывает измененения в файлах текущей ветки. Этой командой смотрим какие файлы попадут в коммит.

`git add file.php` - Добавляет файл к текущей ветки.<br> 
IDE-шки как правило спрашивают нужно ли добавлять новые файлы автоматически, тогда эта команда не требуется. Но если этого нет, то все новые файлы нужно добавлять этой командой, иначе они не появятся в коммите.

`git commit -m "Описание коммита"` - Сделать коммит - зафиксировать изменения в СКВ.

`git commit --amend` - Изменение последнего коммита. Можно изменить описание или добавить файлы в последний коммит. Это возмжоно пока вы не сделали пуш.

`git merge thanks-bug-fix` - сливаем ветку thanks-bug-fix в текущую где находимся

`git push origin dev` - отправляем ветку **dev** в удаленный репозиторий **origin** (может называться по другому, чекаем командой `git remote -v`)


### Вкратце опишу процесс разработки над новой задачей (даже мелкой):
- Получаем последнюю версию ветки dev;
- На ее основе создаем новую ветку под текущую задачу;
- Работаем;
- Закончили - не забываем контролировать состояние ветки перед коммитом командой `git status`;
- Делаем коммит;
- Получаем последнюю версию ветки dev;
- Мерджим свою ветку в dev решая возникшие конфликты;
- Пушим на сервер;
- Ответсвенный проверяет, тестирует. Если все хорошо сливает ветку dev в master - так все изменеия попадают на рабочий сервер через автодеплой.


### Теперь подробно весь процесс:

#### 1. Когда приступаем к работе над git новым дефектом / функционалом, переключаемся на ветку dev и получаем ее последнюю версию:

`git checkout dev` - Переключаемся на ветку **dev**<br>
`git pull origin dev` - Получаем актуальную версию ветки **dev**

Где:<br>
**origin** - Название удаленного репозитория (remote)<br>
<br>
#### 2. Допустим нужно пофиксить баг в функционале "Спасибо". Создаем новую ветку из dev:

`git checkout -b thanks-bug-fix` - Создаем ветку на основе текущей и переключает на нее
<br><br>
#### 3. Закончили работу или логичекий блок в задаче, делаем коммит для фиксации всех изменений в нашей ветке.

Перед коммитом можно убедиться, что в него будут включены отредактироавнные нами файлы командой `git status`, если их там нет нужно сделать `git add filename.php`.

`git commit -m "Сделана половина задачи"` - Отправляем коммит с сообщением что было сделано
<br><br>
#### 4. Работа закончена, теперь нужно влить свою ветку **thanks-bug-fix** в **dev**.<br>

Но ветку **dev** могли уже обновить и что бы влить без конфликтов сначала получим последние изменения ветки **dev**:

`git checkout dev` - Переключаемся на ветку **dev**<br>
`git pull origin dev` - Получаем актуальную версию ветки **dev**<br>
`git merge thanks-bug-fix` - Сливаем свою ветку в **dev**

Если есть конфликты - решаем их.


#### 5. Замечательно, но твой новый код лежит у тебя локально и его никто не видит. Теперь его нужно запушить в удаленный репозиторий:

`git push origin dev` - проект улетает в удаленный репозиторий, и вся команда видит какие изменения ты делал.


#### 6. Как правило дальше возникают доработки, поэтому переключаемся обратно на свою ветку:

`git checkout thanks-bug-fix`<br>
Допиливаем код и после этого возвращаемся к п.3.


### Рекомендации 
Если ваша IDE поддерживает работу с гитом это замечательно. Но для начала рекоммендую ручками писать в терминале комманды и научиться понимать в каком месте мы находимся (в какой ветке, какие файлы попаду/не попадут в коммит).
Частые ошибка новичков: <br>
- Сделали задачу, закомитили-запушили, а нужные файлы в коммит не попали.<br>
- Смержили, запушили, оказалось перепутали ветки и смержился **dev** в **thanks-bug-fix**, а не наоборот.<br>

Рекоммендую зарегистрироваться на GitHub и потестировать работу git с локальным и удаленным репозиториями. И только после этого клоинровать себе рабочий проект.